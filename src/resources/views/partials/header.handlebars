<!-- Navbar -->
    <nav id="header" class="navbar navbar-expand-lg bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#">
                <img class="navbar_custom_icon" src="/img/logo.png" alt="">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <img src="/img/menu.svg" height="24" width="24" alt="">
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/home">Lịch chiếu</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="/theater">Hệ thống rạp</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="/voucher">Khuyến mãi/Sự kiện</a>
                    </li>
                </ul>
            </div>
            <div>
                 <!-- Kiểm tra nếu người dùng đã đăng nhập -->
                {{#if user}}
                    <div class="user-menu">
                        <span class="user-name">{{user.username}}</span>
                        <img src="/img/user-icon.svg" class="user-icon" id="userIcon" alt="User Icon">
                        <div class="dropdown-menu" id="dropdownMenu" style="display:none;">
                            <a href="/profile">Profile</a>
                            <a href="/logout">Logout</a>
                        </div>
                    </div>
                {{else}}
                    <!-- Nếu chưa đăng nhập, hiển thị nút đăng nhập và đăng ký -->
                    <button onclick="window.location.href='/'">Đăng nhập</button>
                    <button onclick="window.location.href='/register'">Đăng ký</button>
                {{/if}}
            </div>
        </div>
    </nav>
    <script>
        document.getElementById('userIcon').addEventListener('click', function () {
            var dropdownMenu = document.getElementById('dropdownMenu');
            if (dropdownMenu.style.display === 'none' || dropdownMenu.style.display === '') {
                dropdownMenu.style.display = 'block';
            } else {
                dropdownMenu.style.display = 'none';
            }
        });

        // Đóng menu khi nhấp ra ngoài
        window.onclick = function(event) {
            if (!event.target.matches('.user-icon')) {
                var dropdowns = document.getElementsByClassName("dropdown-menu");
                for (var i = 0; i < dropdowns.length; i++) {
                    var openDropdown = dropdowns[i];
                    if (openDropdown.style.display === 'block') {
                        openDropdown.style.display = 'none';
                    }
                }
            }
        }
    </script>
